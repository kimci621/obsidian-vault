**#FeatureSlicedDesign**

  

**Cлои**

Этот уровень определяет скоуп ответственности слоя, а также уровень опасности изменений. Чем выше расположен слой, тем выше уровень его ответственности и знаний о других слоях. Чем ниже расположен слой, тем он более абстрактный и больше используется в верхних слоях, а значит больше опасности вносить в него изменения.

  

**Cлайсы**

Они отображают конкретную функциональность бизнес-логики. Методология почти не влияет на этот уровень, многое зависит от конкретного проекта. По факту это папки, которые группируют файлы, реализующие тот или иной модуль.

  

**Сегменты**

Распределяются по назначению модуля в коде и реализации. По методологии каждый сегмент отвечает за свою часть технической реализации модуля:

  

- api/ — работа с API. Авторы методологии советуют класть API-логику в shared, чтобы она не распылялась по проекту.
- config/ — конфигурация модуля.
- lib/ — различные утилитарные функции и вспомогательные библиотеки. 
- model/ — бизнес-логика: store, actions, effects, reducers и так далее.
- ui/ — отвечает за отображение. 

  

Этот подход имеет такой путь:  
  
Абстрактно --------------------------------------------------------> Предметная область

**shared** -> entities -> **features** -> widgets -> **pages** -> processes -> **app**

  

  

    * Один модуль не должен использовать другой модуль, расположенный на том же слое или на слоях выше. Например, фича А не должна импортировать фичу B. В противном случае модули перестают быть изолированными друг от друга и теряют устойчивость к новыми требованиям. 

    * Когда мы модифицируем фичу B, мы неявно изменяем и фичу A. В небольшом приложении, возможно, это не так критично. Но чем больше людей работает над проектом и чем объемнее кодовая база, тем сложнее держать в голове все связи между модулями. Данное правило позволяет стандартизировать этот процесс, упрощает рефакторинг и модификацию модулей.

  

Рассматриваем каждый слайс отдельно:

  

--- slice Shared ---

Shared — самый абстрактный слой приложения, который содержит переиспользуемые модули, не связанные с бизнес-логикой. В нем содержится ui kit приложения, простые хелперы, либы, т.е. никакой бизнес логики.

- shared/api — работа с API.
- shared/config — модуль конфигурации приложения и его окружения. 
- shared/hooks — кастомные хуки.
- shared/lib — различные утилитарные функции и вспомогательные библиотеки.
- shared/themes — список цветов и тем приложения.
- shared/ui — UI-компоненты: Input, Select, Table и другие. 

  

* Не путать абстрактные UI-компоненты с реализующими конкретные бизнес-сущности или фичи. К примеру, Select — это Shared/UI-компонент, а CitySelect — уже фича. При создании того или иного модуля нужно оценить, будут ли использоваться бизнес-сущности в компоненте. Если нет — модуль необходимо назвать максимально абстрактно и поместить в Shared. В противном случае, желательно указать в названии бизнес-сущность или фичу, которую модуль реализует, и поместить в слой Entities или Features

  

--- slice Entities ---

Entities(сущность) — это компоненты, связанные с представлением бизнес-сущностей, с помощью которых происходит построение бизнес-логики. сущности Users, Carts и тд относятся к Entities. К примеру карточка товара, корзина, превью и тд.

  

--- slice Features ---

Features(фича) — Части обрабатывающие пользовательские сценарии, к примеру формы, кнопки, переключатели, слайдеры, аккордионы, заказ в корзину, добавление в избранное, табуляция, поиск и тд.

  

Фича — это функциональность для пользователя, а сущность — то, с помощью чего реализуется эта функциональность

  

--- slice Widgets ---

Widgets — самостоятельные и полноценные блоки страниц, которые могут быть внедрены в любое место в приложении,а так же могут переиспользоваться. Чтобы не дублировать какие-нибудь реализации, части можно выносить в виджеты.

  

--- slice Processes ---

В папке Processes находится логика, которая затрагивает несколько страниц или все приложение. К примеру аутентификация, уведомления, вывод/отслеживание ошибок, аналитика и тд

  

--- slice Pages ---

Pages — это страницы нашего приложения. Методология советует, чтобы каждая страница имела максимально простую структуру, а бизнес-логику переносить на более низкие слои. Поэтому страница — это композиция из виджетов/фич и тд, которая отображает взаимодействие между нижележащими слоями. 

  

--- slice App ---

В App находится общая инициализирующая логика приложения — различные обертки, глобальные сторы и стили. В общем, все то, что влияет на работу всего приложения.

  

--- optional slice Router ---

Можно вынести логику работы с роутами в отдельный слой, чтобы не перегружать слой App или Pages. Если разработчик захочет, например, добавить новый роут или изменить адрес существующего, он точно будет знать, в каком месте вносить правки, а не искать среди большого количества оберток.

  

Layered system, доступность слоев для других слоев приложения:

  

  

Структура slices:

  

  

Segment:

  

  

Деструктуризация:

  

  

Сравниваем классический подход и feature sliced